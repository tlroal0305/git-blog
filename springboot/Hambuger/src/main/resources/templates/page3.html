<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>메뉴 선택</title>
    <style>
        * {
          margin: 0;
          padding: 0;
        }

        @media screen and (max-width: 768px) {
          body {
            background-color: rgb(255, 198, 12);

            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }
        }

        #page3_header {
          background-color: whitesmoke;
          display: flex;
          flex-direction: row;
          justify-content: space-between;

          padding: 10px;
        }

        #header_left {
          font-weight: bold;
          margin-top: 5px;
        }

        #page3_body {
          width: 600px;
          height: 700px;
        }

        #page3_aside {
          background-color: white;
          height: 650px;

          display: flex;

          margin-top: 20px;
        }

        #asid_list {
          height: 400px;

          margin: 30px 10px;
          display: flex;
          flex-direction: column;

          text-align: center;
        }

        .aside {
          border: 1px solid rgb(255, 198, 12);
          border-radius: 5px;

          width: 80px;
          padding: 5px;
          margin: 10px;

          font-size: 13px;
        }

        #menu1,
        #menu2,
        #menu3 {
          margin: 10px;
        }

        .menu_header {
          font-size: 25px;
          font-weight: bold;

          width: 100%;
          margin-top: 30px;
        }

        .menus {
          display: flex;
          flex-wrap: wrap;
          margin-top: 10px;
        }

        .menu_img {
          border: 1px solid #eee;
          border-radius: 5px;

          width: 180px;
          height: 200px;

          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;

          margin: 5px;
        }

        .menu_name,
        .menu_price {
          color: gray;
        }

        #page3_footer {
          width: 100%;
        }

        #list {
          border: 1px solid rgb(255, 198, 12);
          background-color: white;

          width: 98%;
          height: 95px;
        }

        #order_list {
          height: 165px;

          background-color: #eee;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
        }

        h3 {
          color: whitesmoke;
          padding: 5px;
        }

        #delBtn {
          border: 3px solid rgb(255, 198, 12);

          border-radius: 15px;
          width: 80px;
          height: 40px;
          margin-top: 25px;
          margin-right: 10px;

          text-align: center;
          background-color: rgb(255, 255, 255);
          font-weight: bold;

          float: right;
        }

        #next {
          display: flex;
          margin: 10px;
        }

        .next_Btn {
          background-color:rgb(189, 23, 23);
          border-radius: 5px;
          color: whitesmoke;

          width: 120px;
          height: 35px;
          text-align: center;
          line-height: 35px;

          margin: 5px;
        }
    </style>
    <link rel="icon" type="image/x-icon" href="햄버거파비콘" />

</head>
<body>
<!-- 버거 메뉴 -->
<div id="page3_body">
    <div id="page3_header">
        <div id="header_right">
            <img src="햄버거로고 배경제거.png" width="100" height="33" />
        </div>
        <div id="header_left">
            <div id="HOME">HOME</div>
        </div>
    </div>

    <div id="page3_main">
        <div id="page3_aside">
            <div id="asid_list">
                <div class="aside">
                    <img src="불고기버거.png" width="55px" height="59px" />
                    <div id="menu1_text">버거</div>
                </div>
                <div class="aside">
                    <img src="더블불고기버거세트.png" width="58px" height="63px" />
                    <div id="menu1_text">세트 메뉴</div>
                </div>
                <div class="aside">
                    <img
                            src="음료메뉴-removebg-preview.png"
                            width="75px"
                            height="59px"
                    />
                    <div id="menu1_text">음료</div>
                </div>
                <div class="aside">
                    <img src="사이드메뉴.png" width="58px" height="63px" />
                    <div id="menu1_text">사이드</div>
                </div>
            </div>
            <div id="menu1">
                <div class="menu_header">버거 메뉴</div>
                <div class="menus">
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="불고기버거.png"
                                width="85px"
                                height="70px"
                        />
                        <div class="menu_name">빅맥버거</div>
                        <div class="menu_price">\5,500</div>
                    </div>
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="베이컨버거.png"
                                width="100px"
                                height="75px"
                        />
                        <div class="menu_name">베이컨버거</div>
                        <div class="menu_price">\6,000</div>
                    </div>
                    <div class="menu_img">
                        <img src="치킨버거.png" width="100px" height="75px" />
                        <div class="menu_name">치킨버거</div>
                        <div class="menu_price">\6,500</div>
                    </div>
                    <div class="menu_img">
                        <img src="더블치즈버거.png" width="80px" height="100px" />
                        <div class="menu_name">더블치즈버거</div>
                        <div class="menu_price">\4,500</div>
                    </div>
                </div>
            </div>
            <div id="menu2" style="display: none">
                <div class="menu_header">세트 메뉴</div>
                <div class="menus">
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="더블불고기버거세트.png"
                                width="85px"
                                height="95px"
                        />
                        <div class="menu_name">빅맥 세트</div>
                        <div class="menu_price">\6,500</div>
                    </div>
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="베이컨버거세트.png"
                                width="85px"
                                height="95px"
                        />
                        <div class="menu_name">베이컨버거 세트</div>
                        <div class="menu_price">\7,000</div>
                    </div>
                    <div class="menu_img">
                        <img src="치킨버거세트.png" width="85px" height="95px" />
                        <div class="menu_name">치킨버거 세트</div>
                        <div class="menu_price">\7,5000</div>
                    </div>
                    <div class="menu_img">
                        <img src="치즈버거세트.png" width="85px" height="95px" />
                        <div class="menu_name">더블치즈버거 세트</div>
                        <div class="menu_price">\5,500</div>
                    </div>
                </div>
            </div>
            <div id="menu3" style="display: none">
                <div class="menu_header">음료 메뉴</div>
                <div class="menus">
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="코카콜라.png"
                                width="85px"
                                height="95px"
                        />
                        <div class="menu_name">코카콜라</div>
                        <div class="menu_price">\2,000</div>
                    </div>
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="사이다.png"
                                width="85px"
                                height="95px"
                        />
                        <div class="menu_name">사이다</div>
                        <div class="menu_price">\2,000</div>
                    </div>
                    <div class="menu_img">
                        <img src="환타.png" width="85px" height="95px" />
                        <div class="menu_name">환타</div>
                        <div class="menu_price">\2,000</div>
                    </div>
                    <div class="menu_img">
                        <img src="펩시.png" width="85px" height="95px" />
                        <div class="menu_name">펩시</div>
                        <div class="menu_price">\2,000</div>
                    </div>
                </div>
            </div>
            <div id="menu4" style="display: none">
                <div class="menu_header">사이드 메뉴</div>
                <div class="menus">
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="사이드메뉴1.png"
                                height="95px"
                        />
                        <div class="menu_name">맥플러리</div>
                        <div class="menu_price">\1,500</div>
                    </div>
                    <div class="menu_img">
                        <img
                                class="buger_img"
                                src="사이드메뉴2.png"
                                width="85px"
                                height="95px"
                        />
                        <div class="menu_name">아이스콘</div>
                        <div class="menu_price">\1,500</div>
                    </div>
                    <div class="menu_img">
                        <img src="사이드메뉴3.png" width="85px" height="95px" />
                        <div class="menu_name">맥윙</div>
                        <div class="menu_price">\2,000</div>
                    </div>
                    <div class="menu_img">
                        <img src="사이드메뉴4.png" width="85px" height="95px" />
                        <div class="menu_name">애플파이</div>
                        <div class="menu_price">\1,500</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page3_footer">
            <h3>주문 내역</h3>
            <div id="order_list">
                <div id="list">
                    <div id="listMenu" style="display: inline-block"></div>
                    <button id="delBtn">비우기</button>
                </div>
                <div id="next">
                    <div class="next_Btn">주문취소</div>
                    <div class="next_Btn" style="background-color: green">다음</div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    //메뉴 선택시, 해당 메뉴 페이지로 넘어감
    let aside = document.getElementsByClassName("aside");

    aside[0].addEventListener("click", function () {
      menu1.style.display = "block";
      document.getElementById("menu2").style.display = "none";
      document.getElementById("menu3").style.display = "none";
      document.getElementById("menu4").style.display = "none";

    });
    aside[1].addEventListener("click", function () {
      menu2.style.display = "block";
      document.getElementById("menu1").style.display = "none";
      document.getElementById("menu3").style.display = "none";
      document.getElementById("menu4").style.display = "none";
    });
    aside[2].addEventListener("click", function () {
      menu3.style.display = "block";
      document.getElementById("menu1").style.display = "none";
      document.getElementById("menu2").style.display = "none";
      document.getElementById("menu4").style.display = "none";
    });

    aside[3].addEventListener("click", function () {
      menu4.style.display = "block";
      document.getElementById("menu1").style.display = "none";
      document.getElementById("menu2").style.display = "none";
      document.getElementById("menu3").style.display = "none";
    });

    //메뉴 클릭시 listMenu에 뜸
    let menu_img = document.getElementsByClassName("menu_img");

    let arrMenu = [];

    for (let i = 0; i < menu_img.length; i++) {
      menu_img[i].addEventListener("click", function () {
        //클릭된 이미지를 새 변수에 저장
        // 메뉴 이미지를 클릭했을 때, 해당 이미지의 URL을 저장
        // .querySelector("img").src -> 선택된 menu_img[i]요소 안에서 img인 요소를 찾음
        let clicked_img = menu_img[i].querySelector("img").src;
        //textContent -> 텍스트 내용을 설정하거나 가져오는 속성
        let clicked_name = menu_img[i].querySelector(".menu_name").textContent; //textContent
        let clicked_price =
          menu_img[i].querySelector(".menu_price").textContent;

        // 상품이 목록에 담겨있는가?
        // 있다면 count+1, 없다면 새로운 값 추가
        let index = 0;
        let found = false;
        // 전체 순환
        //  -> arrMenu의 각 요소를 하나씩 반복하면서 변수 menu에 대입하여 수행하는 반복문
        for (let menu of arrMenu) {
          //{ src: "menu_img", count: 1 }
          if (menu.src === clicked_img) {
            let count = menu.count + 1;

            // 원래 있던 값을 새로운 값으로 변경
            arrMenu.splice(index, 1, {
              src: clicked_img,
              count: count,
              name: clicked_name, //클릭된 메뉴의 이름 설정
              price: clicked_price, //클릭된 메뉴의 이름 설정,
            });
            found = true;
            break;
          }
          index++;
        }

        //
        if (found == false) {
          arrMenu.push({
            src: clicked_img,
            count: 1,
            name: clicked_name,
            price: clicked_price,
          });
        }

        displayClickedimg(arrMenu);

        //JSON.stringify(arrMenu) -> JS객체나 배열을 JSON 형식의 문자열로 변환하는 함수
        //                           객체나 배열을 네트워크로 전송, 로컬 스토리지에 저장할때 사용
        // JSON 형식의 문자열로 변환하는 이유? 데이터를 저장 or 전송하기 위해
        let arrMenuString = JSON.stringify(arrMenu); //arrMenu를 JSON형식의 문자열로 변환
        localStorage.setItem("arrMenu", arrMenuString);
        console.log(arrMenu);
      });
    }

    // 클릭된 이미지 화면에 보여주게 하는 함수
    function displayClickedimg(arrMenu) {
      let listMenu = document.getElementById("listMenu");
      listMenu.innerHTML = "";

      // menu라는 변수 생성과 동시에 전체 순환
      for (let menu of arrMenu) {
        //이미지를 보여주는 요소 생성
        let img = document.createElement("img");
        img.src = menu.src;
        img.width = 30;
        img.height = 35;

        // DOM 요소를 다른 DOM 요소의 하위 요소로 추가하는 역할
        listMenu.appendChild(img);

        //수량 표시 요소
        let span = document.createElement("span");
        span.innerHTML = menu.count;
        listMenu.appendChild(span);

        span.style.backgroundColor = " rgb(224, 21, 21)";
        span.style.color = "white";
        span.style.padding = "3px";
        span.style.borderRadius = "50px";
      }
    }

    //비우기 버튼 클릭시 초기화
    let delBtn = document.getElementById("delBtn");

    delBtn.addEventListener("click", function () {
      arrMenu = [];

      displayClickedimg(arrMenu);
    });

    //주문 취소 버튼 클릭시 첫화면으로, 다음 버튼 클릭 시 page4로
    let next_Btn = document.getElementsByClassName("next_Btn");

    for (let i = 0; i < next_Btn.length; i++) {
      next_Btn[i].addEventListener("click", function () {
        if (i == 0) {
          window.location.href = "page1.html";
        } else if (i == 1) {
          window.location.href = "page5.html";
        }
      });
    }
</script>
</html>
